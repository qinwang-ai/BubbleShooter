b11341585c110c33aa0b53cc1757f29d
jsio("from util.browser import $");jsio("import .Widget");jsio("import .jscolor.jscolor as jscolor");
var alphaSelect=!1,alphaIndicator,Users_tsunami_projects_devkitPoj_BubbleShooter_modules_devkit_core_modules_squill_Alpha=__class__,Alpha=exports=Users_tsunami_projects_devkitPoj_BubbleShooter_modules_devkit_core_modules_squill_Alpha(function(){return this.init&&this.init.apply(this,arguments)},Widget,function(e){this._css="lph";this._type="text";this.init=function(a){a=merge(a,{tag:"input"});e(this,"init",[a])};this.buildWidget=function(){var a=this._el;a.widget=this;$.onEvent(a,"focus",this,"_onFocus");
$.onEvent(a,"blur",this,"_onBlur");$.onEvent(a,"change",this,"_onChange");alphaSelect||(alphaSelect=document.createElement("div"),alphaSelect.style.display="none",alphaSelect.className="colorMenu",document.body.appendChild(alphaSelect),$.onEvent(alphaSelect,"mousedown",this,"_onSelect"),a=document.createElement("canvas"),a.width=20,a.height=100,alphaSelect.appendChild(a),$.style(a,{"float":"left",width:"20px",height:"100px",margin:"8px 0 0 12px",border:"1px solid #000",borderColor:"ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",
backgroundColor:"red"}),$.onEvent(a,"mousedown",this,"_onMouseDown"),$.onEvent(a,"mousemove",this,"_onMouseMove"),$.onEvent(a,"mouseup",this,"_onMouseUp"),$.onEvent(a,"mouseout",this,"_onMouseOut"),alphaIndicator=document.createElement("img"),alphaIndicator.src="img/colorpicker/arrow.gif",alphaSelect.appendChild(alphaIndicator),$.style(alphaIndicator,{position:"absolute",left:"4px",top:"2px",border:"0px hidden"}),a=a.getContext("2d"),linearGradient=a.createLinearGradient(0,0,0,100),linearGradient.addColorStop(0,
"#FFFFFF"),linearGradient.addColorStop(1,"#000000"),a.fillStyle=linearGradient,a.fillRect(0,0,20,100))};this._showIndicator=function(a){0>a&&(a=0);100<a&&(a=100);$.style(alphaIndicator,{position:"absolute",left:"4px",top:2+a+"px",border:"0px hidden"});return a};this._showMouseAlpha=function(a){alphaSelect.target.value=100-this._showIndicator(a.offsetY);alphaSelect.widget.publish("Change",parseInt(alphaSelect.target.value,10))};this._onChange=function(){var a=this._el.value;isNaN(a)||(a=parseInt(a,
10),0<=a&&100>=a&&alphaSelect.widget.publish("Change",a))};this._onFocus=function(a){var b=this._el.getBoundingClientRect(),c=b.right+4,d=b.top;d+122>window.innerHeight&&(d=b.bottom-122);c+44>window.innerWidth&&(c=b.left-48);$.style(alphaSelect,{position:"absolute",width:"44px",height:"122px",zIndex:"1000000",left:c+"px",top:d+"px",display:"block"});alphaSelect.widget=a.target.widget;alphaSelect.target=a.target;this._showIndicator(100-(isNaN(alphaSelect.target.value)?0:parseInt(alphaSelect.target.value,
10)))};this._onBlur=function(){alphaSelect.style.display="none"};this._onSelect=function(a){$.stopEvent(a)};this._onMouseDown=function(a){$.stopEvent(a);this._showMouseAlpha(a);this._mouseDown=!0};this._onMouseMove=function(a){this._mouseDown&&this._showMouseAlpha(a);$.stopEvent(a)};this._onMouseOut=function(a){this._mouseDown=!1;$.stopEvent(a)};this._onMouseUp=function(a){this._mouseDown=!1;$.stopEvent(a)};this.setValue=function(a){this._el.value=a};this.getValue=function(){return this._el.value}});
