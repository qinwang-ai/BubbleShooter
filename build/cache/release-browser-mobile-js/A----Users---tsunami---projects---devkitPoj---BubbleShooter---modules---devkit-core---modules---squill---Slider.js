a4a705134642504d9ca3341696665891
jsio("from util.browser import $");jsio("import .Widget");
var Users_tsunami_projects_devkitPoj_BubbleShooter_modules_devkit_core_modules_squill_Slider=__class__,Slider=exports=Users_tsunami_projects_devkitPoj_BubbleShooter_modules_devkit_core_modules_squill_Slider(function(){return this.init&&this.init.apply(this,arguments)},Widget,function(e){this._css="rng";this._type="range";this.init=function(a){this._width=a.width||100;this._padding=12;this._hover=!1;this._fillColor=a.fillColor||"#000000";this._lineColor=a.lineColor||"#FFFFFF";this._def={children:[{id:a.id+
"Canvas",tag:"canvas",attrs:{width:this._width,height:2*this._padding}}]};e(this,"init",[a])};this._render=function(){var a=this._width,c=this._padding,b=this._ctx;b.clearRect(0,0,a,2*c);b.lineCap="round";b.beginPath();b.arc(c+2,c,2,0.5*Math.PI,1.5*Math.PI,!1);b.arc(a-c-2,c,2,1.5*Math.PI,0.5*Math.PI,!1);b.closePath();b.lineWidth=1;b.strokeStyle=this._lineColor;b.stroke();b.fillStyle=this._fillColor;b.fill();b.save();this._hover&&(b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=10,b.shadowColor="#0099FF");
a=~~((a-2*c)*(this.value-this.min)/(this.max-this.min));b.beginPath();b.arc(c+a,c,5,0,2*Math.PI,!1);b.closePath();c=b.createRadialGradient(c-1+a,c-1,0,c+a,c,4);c.addColorStop(0,"#FFFFFF");c.addColorStop(1,"#707070");b.fillStyle=c;b.fill();b.restore()};this.buildWidget=function(){var a=this._el;canvas=a.firstChild;a.slider=this;$.onEvent(canvas,"mouseout",this,"_onMouseOut");$.onEvent(canvas,"mousedown",this,"_onMouseDown");$.onEvent(canvas,"mouseup",this,"_onMouseUp");$.onEvent(canvas,"mousemove",
this,"_onMouseMove");this.min=this._opts.min||0;this.max=this._opts.max||100;this.step=this._opts.step||1;this.value=this._opts.value||0;this._mouseDown=!1;this._checkRange();this._ctx=canvas.getContext("2d");this._render()};this.setValue=function(a){this.value=a;this._render()};this._onChange=function(){this.publish("Change",this.value)};this._checkRange=function(){this.value<this.min&&(this.value=this.min);this.value>this.max&&(this.value=this.max)};this._checkMouse=function(a){var c=a.offsetX,
b=a.offsetY,f=this._width,d=this._padding,e=this._hover;this._mouseDown?c>d&&(b>d-5&&c<f-d&&b<d+5)&&(a=(a.offsetX-d)/(f-2*d)*(this.max-this.min),this.value=a=this.min+Math.round(a/this.step)*this.step,this._checkRange(),this._render(),this._onChange()):(b>d-5&&b<d+5?(v=d+~~((f-2*d)*(this.value-this.min)/(this.max-this.min)),this._hover=c>v-5&&b<v+5):this._hover=!1,this._hover!==e&&this._render())};this._onMouseOut=function(){this._hover=this._mouseDown=!1;this._render()};this._onMouseDown=function(a){this._mouseDown=
!0;this._checkMouse(a)};this._onMouseUp=function(){this._mouseDown=!1};this._onMouseMove=function(a){this._checkMouse(a)}});
